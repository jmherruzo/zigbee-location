                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ANSI-C Compiler
                                      3 ; Version 3.4.0 #8981 (Oct 24 2015) (Linux)
                                      4 ; This file was generated Sun Oct 25 01:52:06 2015
                                      5 ;--------------------------------------------------------
                                      6 	.module framer_802154
                                      7 	.optsdcc -mmcs51 --model-large
                                      8 	
                                      9 ;--------------------------------------------------------
                                     10 ; Public variables in this module
                                     11 ;--------------------------------------------------------
                                     12 	.globl _framer_802154
                                     13 	.globl _random_rand
                                     14 	.globl _packetbuf_addr
                                     15 	.globl _packetbuf_set_addr
                                     16 	.globl _packetbuf_attr
                                     17 	.globl _packetbuf_set_attr
                                     18 	.globl _packetbuf_hdrreduce
                                     19 	.globl _packetbuf_hdralloc
                                     20 	.globl _packetbuf_datalen
                                     21 	.globl _packetbuf_hdrptr
                                     22 	.globl _packetbuf_dataptr
                                     23 	.globl _frame802154_parse
                                     24 	.globl _frame802154_create
                                     25 	.globl _frame802154_hdrlen
                                     26 	.globl _rimeaddr_cmp
                                     27 	.globl _rimeaddr_copy
                                     28 	.globl _memset
                                     29 ;--------------------------------------------------------
                                     30 ; special function registers
                                     31 ;--------------------------------------------------------
                                     32 	.area RSEG    (ABS,DATA)
      000000                         33 	.org 0x0000
                                     34 ;--------------------------------------------------------
                                     35 ; special function bits
                                     36 ;--------------------------------------------------------
                                     37 	.area RSEG    (ABS,DATA)
      000000                         38 	.org 0x0000
                                     39 ;--------------------------------------------------------
                                     40 ; overlayable register banks
                                     41 ;--------------------------------------------------------
                                     42 	.area REG_BANK_0	(REL,OVR,DATA)
      000000                         43 	.ds 8
                                     44 ;--------------------------------------------------------
                                     45 ; internal ram data
                                     46 ;--------------------------------------------------------
                                     47 	.area DSEG    (DATA)
                                     48 ;--------------------------------------------------------
                                     49 ; overlayable items in internal ram 
                                     50 ;--------------------------------------------------------
                                     51 ;--------------------------------------------------------
                                     52 ; indirectly addressable internal ram data
                                     53 ;--------------------------------------------------------
                                     54 	.area ISEG    (DATA)
                                     55 ;--------------------------------------------------------
                                     56 ; absolute internal ram data
                                     57 ;--------------------------------------------------------
                                     58 	.area IABS    (ABS,DATA)
                                     59 	.area IABS    (ABS,DATA)
                                     60 ;--------------------------------------------------------
                                     61 ; bit data
                                     62 ;--------------------------------------------------------
                                     63 	.area BSEG    (BIT)
                                     64 ;--------------------------------------------------------
                                     65 ; paged external ram data
                                     66 ;--------------------------------------------------------
                                     67 	.area PSEG    (PAG,XDATA)
                                     68 ;--------------------------------------------------------
                                     69 ; external ram data
                                     70 ;--------------------------------------------------------
                                     71 	.area XSEG    (XDATA)
      000000                         72 _mac_dsn:
      000000                         73 	.ds 1
      000001                         74 _frame:
      000001                         75 	.ds 49
      000032                         76 _len:
      000032                         77 	.ds 1
                                     78 ;--------------------------------------------------------
                                     79 ; absolute external ram data
                                     80 ;--------------------------------------------------------
                                     81 	.area XABS    (ABS,XDATA)
                                     82 ;--------------------------------------------------------
                                     83 ; external initialized ram data
                                     84 ;--------------------------------------------------------
                                     85 	.area XISEG   (XDATA)
      000000                         86 _initialized:
      000000                         87 	.ds 1
                                     88 	.area HOME    (CODE)
                                     89 	.area GSINIT0 (CODE)
                                     90 	.area GSINIT1 (CODE)
                                     91 	.area GSINIT2 (CODE)
                                     92 	.area GSINIT3 (CODE)
                                     93 	.area GSINIT4 (CODE)
                                     94 	.area GSINIT5 (CODE)
                                     95 	.area GSINIT  (CODE)
                                     96 	.area GSFINAL (CODE)
                                     97 	.area CSEG    (CODE)
                                     98 ;--------------------------------------------------------
                                     99 ; global & static initialisations
                                    100 ;--------------------------------------------------------
                                    101 	.area HOME    (CODE)
                                    102 	.area GSINIT  (CODE)
                                    103 	.area GSFINAL (CODE)
                                    104 	.area GSINIT  (CODE)
                                    105 ;--------------------------------------------------------
                                    106 ; Home
                                    107 ;--------------------------------------------------------
                                    108 	.area HOME    (CODE)
                                    109 	.area HOME    (CODE)
                                    110 ;--------------------------------------------------------
                                    111 ; code
                                    112 ;--------------------------------------------------------
                                    113 	.area CSEG    (CODE)
                                    114 ;------------------------------------------------------------
                                    115 ;Allocation info for local variables in function 'is_broadcast_addr'
                                    116 ;------------------------------------------------------------
                                    117 ;addr                      Allocated to stack - sp -4
                                    118 ;mode                      Allocated to registers r7 
                                    119 ;i                         Allocated to registers 
                                    120 ;------------------------------------------------------------
                                    121 ;	../contiki-sensinode/core/net/mac/framer-802154.c:68: is_broadcast_addr(uint8_t mode, uint8_t *addr)
                                    122 ;	-----------------------------------------
                                    123 ;	 function is_broadcast_addr
                                    124 ;	-----------------------------------------
      000000                        125 _is_broadcast_addr:
                           000007   126 	ar7 = 0x07
                           000006   127 	ar6 = 0x06
                           000005   128 	ar5 = 0x05
                           000004   129 	ar4 = 0x04
                           000003   130 	ar3 = 0x03
                           000002   131 	ar2 = 0x02
                           000001   132 	ar1 = 0x01
                           000000   133 	ar0 = 0x00
      000000 AF 82            [24]  134 	mov	r7,dpl
                                    135 ;	../contiki-sensinode/core/net/mac/framer-802154.c:70: int i = mode == FRAME802154_SHORTADDRMODE ? 2 : 8;
      000002 BF 02 04         [24]  136 	cjne	r7,#0x02,00108$
      000005 7F 02            [12]  137 	mov	r7,#0x02
      000007 80 02            [24]  138 	sjmp	00109$
      000009                        139 00108$:
      000009 7F 08            [12]  140 	mov	r7,#0x08
      00000B                        141 00109$:
      00000B 8F 06            [24]  142 	mov	ar6,r7
      00000D 7F 00            [12]  143 	mov	r7,#0x00
                                    144 ;	../contiki-sensinode/core/net/mac/framer-802154.c:71: while(i-- > 0) {
      00000F                        145 00103$:
      00000F 8E 04            [24]  146 	mov	ar4,r6
      000011 8F 05            [24]  147 	mov	ar5,r7
      000013 1E               [12]  148 	dec	r6
      000014 BE FF 01         [24]  149 	cjne	r6,#0xFF,00124$
      000017 1F               [12]  150 	dec	r7
      000018                        151 00124$:
      000018 C3               [12]  152 	clr	c
      000019 E4               [12]  153 	clr	a
      00001A 9C               [12]  154 	subb	a,r4
      00001B 74 80            [12]  155 	mov	a,#(0x00 ^ 0x80)
      00001D 8D F0            [24]  156 	mov	b,r5
      00001F 63 F0 80         [24]  157 	xrl	b,#0x80
      000022 95 F0            [12]  158 	subb	a,b
      000024 50 22            [24]  159 	jnc	00105$
                                    160 ;	../contiki-sensinode/core/net/mac/framer-802154.c:72: if(addr[i] != 0xff) {
      000026 E5 81            [12]  161 	mov	a,sp
      000028 24 FC            [12]  162 	add	a,#0xfc
      00002A F8               [12]  163 	mov	r0,a
      00002B EE               [12]  164 	mov	a,r6
      00002C 26               [12]  165 	add	a,@r0
      00002D FB               [12]  166 	mov	r3,a
      00002E EF               [12]  167 	mov	a,r7
      00002F 08               [12]  168 	inc	r0
      000030 36               [12]  169 	addc	a,@r0
      000031 FC               [12]  170 	mov	r4,a
      000032 08               [12]  171 	inc	r0
      000033 86 05            [24]  172 	mov	ar5,@r0
      000035 8B 82            [24]  173 	mov	dpl,r3
      000037 8C 83            [24]  174 	mov	dph,r4
      000039 8D F0            [24]  175 	mov	b,r5
      00003B 12r00r00         [24]  176 	lcall	__gptrget
      00003E FB               [12]  177 	mov	r3,a
      00003F BB FF 02         [24]  178 	cjne	r3,#0xFF,00126$
      000042 80 CB            [24]  179 	sjmp	00103$
      000044                        180 00126$:
                                    181 ;	../contiki-sensinode/core/net/mac/framer-802154.c:73: return 0;
      000044 90 00 00         [24]  182 	mov	dptr,#0x0000
      000047 22               [24]  183 	ret
      000048                        184 00105$:
                                    185 ;	../contiki-sensinode/core/net/mac/framer-802154.c:76: return 1;
      000048 90 00 01         [24]  186 	mov	dptr,#0x0001
      00004B 22               [24]  187 	ret
                                    188 ;------------------------------------------------------------
                                    189 ;Allocation info for local variables in function 'create'
                                    190 ;------------------------------------------------------------
                                    191 ;	../contiki-sensinode/core/net/mac/framer-802154.c:80: create(void)
                                    192 ;	-----------------------------------------
                                    193 ;	 function create
                                    194 ;	-----------------------------------------
      00004C                        195 _create:
                                    196 ;	../contiki-sensinode/core/net/mac/framer-802154.c:84: memset(&frame, 0, sizeof(frame));
      00004C 74 31            [12]  197 	mov	a,#0x31
      00004E C0 E0            [24]  198 	push	acc
      000050 E4               [12]  199 	clr	a
      000051 C0 E0            [24]  200 	push	acc
      000053 C0 E0            [24]  201 	push	acc
      000055 90r00r01         [24]  202 	mov	dptr,#_frame
      000058 75 F0 00         [24]  203 	mov	b,#0x00
      00005B 12r00r00         [24]  204 	lcall	_memset
      00005E 15 81            [12]  205 	dec	sp
      000060 15 81            [12]  206 	dec	sp
      000062 15 81            [12]  207 	dec	sp
                                    208 ;	../contiki-sensinode/core/net/mac/framer-802154.c:86: if(!initialized) {
      000064 90r00r00         [24]  209 	mov	dptr,#_initialized
      000067 E0               [24]  210 	movx	a,@dptr
      000068 FF               [12]  211 	mov	r7,a
      000069 70 16            [24]  212 	jnz	00102$
                                    213 ;	../contiki-sensinode/core/net/mac/framer-802154.c:87: initialized = 1;
      00006B 90r00r00         [24]  214 	mov	dptr,#_initialized
      00006E 74 01            [12]  215 	mov	a,#0x01
      000070 F0               [24]  216 	movx	@dptr,a
                                    217 ;	../contiki-sensinode/core/net/mac/framer-802154.c:88: mac_dsn = random_rand() & 0xff;
      000071 12r00r00         [24]  218 	lcall	_random_rand
      000074 E5 82            [12]  219 	mov	a,dpl
      000076 85 83 F0         [24]  220 	mov	b,dph
      000079 FE               [12]  221 	mov	r6,a
      00007A 7F 00            [12]  222 	mov	r7,#0x00
      00007C 90r00r00         [24]  223 	mov	dptr,#_mac_dsn
      00007F EE               [12]  224 	mov	a,r6
      000080 F0               [24]  225 	movx	@dptr,a
      000081                        226 00102$:
                                    227 ;	../contiki-sensinode/core/net/mac/framer-802154.c:92: frame.fcf.frame_type = FRAME802154_DATAFRAME;
      000081 90r00r01         [24]  228 	mov	dptr,#_frame
      000084 74 01            [12]  229 	mov	a,#0x01
      000086 F0               [24]  230 	movx	@dptr,a
                                    231 ;	../contiki-sensinode/core/net/mac/framer-802154.c:93: frame.fcf.security_enabled = 0;
      000087 90r00r02         [24]  232 	mov	dptr,#(_frame + 0x0001)
      00008A E4               [12]  233 	clr	a
      00008B F0               [24]  234 	movx	@dptr,a
                                    235 ;	../contiki-sensinode/core/net/mac/framer-802154.c:94: frame.fcf.frame_pending = packetbuf_attr(PACKETBUF_ATTR_PENDING);
      00008C 75 82 12         [24]  236 	mov	dpl,#0x12
      00008F 12r00r00         [24]  237 	lcall	_packetbuf_attr
      000092 AE 82            [24]  238 	mov	r6,dpl
      000094 90r00r03         [24]  239 	mov	dptr,#(_frame + 0x0002)
      000097 EE               [12]  240 	mov	a,r6
      000098 F0               [24]  241 	movx	@dptr,a
                                    242 ;	../contiki-sensinode/core/net/mac/framer-802154.c:95: if(rimeaddr_cmp(packetbuf_addr(PACKETBUF_ADDR_RECEIVER), &rimeaddr_null)) {
      000099 75 82 19         [24]  243 	mov	dpl,#0x19
      00009C 12r00r00         [24]  244 	lcall	_packetbuf_addr
      00009F AD 82            [24]  245 	mov	r5,dpl
      0000A1 AE 83            [24]  246 	mov	r6,dph
      0000A3 AF F0            [24]  247 	mov	r7,b
      0000A5 74r00            [12]  248 	mov	a,#_rimeaddr_null
      0000A7 C0 E0            [24]  249 	push	acc
      0000A9 74s00            [12]  250 	mov	a,#(_rimeaddr_null >> 8)
      0000AB C0 E0            [24]  251 	push	acc
      0000AD 74 80            [12]  252 	mov	a,#0x80
      0000AF C0 E0            [24]  253 	push	acc
      0000B1 8D 82            [24]  254 	mov	dpl,r5
      0000B3 8E 83            [24]  255 	mov	dph,r6
      0000B5 8F F0            [24]  256 	mov	b,r7
      0000B7 12r00r00         [24]  257 	lcall	_rimeaddr_cmp
      0000BA AE 82            [24]  258 	mov	r6,dpl
      0000BC AF 83            [24]  259 	mov	r7,dph
      0000BE 15 81            [12]  260 	dec	sp
      0000C0 15 81            [12]  261 	dec	sp
      0000C2 15 81            [12]  262 	dec	sp
      0000C4 EE               [12]  263 	mov	a,r6
      0000C5 4F               [12]  264 	orl	a,r7
      0000C6 60 07            [24]  265 	jz	00104$
                                    266 ;	../contiki-sensinode/core/net/mac/framer-802154.c:96: frame.fcf.ack_required = 0;
      0000C8 90r00r04         [24]  267 	mov	dptr,#(_frame + 0x0003)
      0000CB E4               [12]  268 	clr	a
      0000CC F0               [24]  269 	movx	@dptr,a
      0000CD 80 0F            [24]  270 	sjmp	00105$
      0000CF                        271 00104$:
                                    272 ;	../contiki-sensinode/core/net/mac/framer-802154.c:98: frame.fcf.ack_required = packetbuf_attr(PACKETBUF_ATTR_MAC_ACK);
      0000CF 75 82 0B         [24]  273 	mov	dpl,#0x0B
      0000D2 12r00r00         [24]  274 	lcall	_packetbuf_attr
      0000D5 AE 82            [24]  275 	mov	r6,dpl
      0000D7 AF 83            [24]  276 	mov	r7,dph
      0000D9 90r00r04         [24]  277 	mov	dptr,#(_frame + 0x0003)
      0000DC EE               [12]  278 	mov	a,r6
      0000DD F0               [24]  279 	movx	@dptr,a
      0000DE                        280 00105$:
                                    281 ;	../contiki-sensinode/core/net/mac/framer-802154.c:100: frame.fcf.panid_compression = 0;
      0000DE 90r00r05         [24]  282 	mov	dptr,#(_frame + 0x0004)
      0000E1 E4               [12]  283 	clr	a
      0000E2 F0               [24]  284 	movx	@dptr,a
                                    285 ;	../contiki-sensinode/core/net/mac/framer-802154.c:103: frame.fcf.frame_version = FRAME802154_IEEE802154_2003;
      0000E3 90r00r07         [24]  286 	mov	dptr,#(_frame + 0x0006)
      0000E6 F0               [24]  287 	movx	@dptr,a
                                    288 ;	../contiki-sensinode/core/net/mac/framer-802154.c:106: if(packetbuf_attr(PACKETBUF_ATTR_MAC_SEQNO)) {
      0000E7 75 82 0A         [24]  289 	mov	dpl,#0x0A
      0000EA 12r00r00         [24]  290 	lcall	_packetbuf_attr
      0000ED E5 82            [12]  291 	mov	a,dpl
      0000EF 85 83 F0         [24]  292 	mov	b,dph
      0000F2 45 F0            [12]  293 	orl	a,b
      0000F4 60 11            [24]  294 	jz	00107$
                                    295 ;	../contiki-sensinode/core/net/mac/framer-802154.c:107: frame.seq = packetbuf_attr(PACKETBUF_ATTR_MAC_SEQNO);
      0000F6 75 82 0A         [24]  296 	mov	dpl,#0x0A
      0000F9 12r00r00         [24]  297 	lcall	_packetbuf_attr
      0000FC AE 82            [24]  298 	mov	r6,dpl
      0000FE AF 83            [24]  299 	mov	r7,dph
      000100 90r00r09         [24]  300 	mov	dptr,#(_frame + 0x0008)
      000103 EE               [12]  301 	mov	a,r6
      000104 F0               [24]  302 	movx	@dptr,a
      000105 80 1C            [24]  303 	sjmp	00108$
      000107                        304 00107$:
                                    305 ;	../contiki-sensinode/core/net/mac/framer-802154.c:109: frame.seq = mac_dsn++;
      000107 90r00r00         [24]  306 	mov	dptr,#_mac_dsn
      00010A E0               [24]  307 	movx	a,@dptr
      00010B FF               [12]  308 	mov	r7,a
      00010C 04               [12]  309 	inc	a
      00010D F0               [24]  310 	movx	@dptr,a
      00010E 90r00r09         [24]  311 	mov	dptr,#(_frame + 0x0008)
      000111 EF               [12]  312 	mov	a,r7
      000112 F0               [24]  313 	movx	@dptr,a
                                    314 ;	../contiki-sensinode/core/net/mac/framer-802154.c:110: packetbuf_set_attr(PACKETBUF_ATTR_MAC_SEQNO, frame.seq);
      000113 7E 00            [12]  315 	mov	r6,#0x00
      000115 C0 07            [24]  316 	push	ar7
      000117 C0 06            [24]  317 	push	ar6
      000119 75 82 0A         [24]  318 	mov	dpl,#0x0A
      00011C 12r00r00         [24]  319 	lcall	_packetbuf_set_attr
      00011F 15 81            [12]  320 	dec	sp
      000121 15 81            [12]  321 	dec	sp
      000123                        322 00108$:
                                    323 ;	../contiki-sensinode/core/net/mac/framer-802154.c:120: frame.fcf.src_addr_mode = FRAME802154_SHORTADDRMODE;
      000123 90r00r08         [24]  324 	mov	dptr,#(_frame + 0x0007)
      000126 74 02            [12]  325 	mov	a,#0x02
      000128 F0               [24]  326 	movx	@dptr,a
                                    327 ;	../contiki-sensinode/core/net/mac/framer-802154.c:124: frame.dest_pid = IEEE802154_PANID;
      000129 90r00r0A         [24]  328 	mov	dptr,#(_frame + 0x0009)
      00012C 74 49            [12]  329 	mov	a,#0x49
      00012E F0               [24]  330 	movx	@dptr,a
      00012F 74 54            [12]  331 	mov	a,#0x54
      000131 A3               [24]  332 	inc	dptr
      000132 F0               [24]  333 	movx	@dptr,a
                                    334 ;	../contiki-sensinode/core/net/mac/framer-802154.c:130: if(rimeaddr_cmp(packetbuf_addr(PACKETBUF_ADDR_RECEIVER), &rimeaddr_null)) {
      000133 75 82 19         [24]  335 	mov	dpl,#0x19
      000136 12r00r00         [24]  336 	lcall	_packetbuf_addr
      000139 AD 82            [24]  337 	mov	r5,dpl
      00013B AE 83            [24]  338 	mov	r6,dph
      00013D AF F0            [24]  339 	mov	r7,b
      00013F 74r00            [12]  340 	mov	a,#_rimeaddr_null
      000141 C0 E0            [24]  341 	push	acc
      000143 74s00            [12]  342 	mov	a,#(_rimeaddr_null >> 8)
      000145 C0 E0            [24]  343 	push	acc
      000147 74 80            [12]  344 	mov	a,#0x80
      000149 C0 E0            [24]  345 	push	acc
      00014B 8D 82            [24]  346 	mov	dpl,r5
      00014D 8E 83            [24]  347 	mov	dph,r6
      00014F 8F F0            [24]  348 	mov	b,r7
      000151 12r00r00         [24]  349 	lcall	_rimeaddr_cmp
      000154 AE 82            [24]  350 	mov	r6,dpl
      000156 AF 83            [24]  351 	mov	r7,dph
      000158 15 81            [12]  352 	dec	sp
      00015A 15 81            [12]  353 	dec	sp
      00015C 15 81            [12]  354 	dec	sp
      00015E EE               [12]  355 	mov	a,r6
      00015F 4F               [12]  356 	orl	a,r7
      000160 60 12            [24]  357 	jz	00110$
                                    358 ;	../contiki-sensinode/core/net/mac/framer-802154.c:132: frame.fcf.dest_addr_mode = FRAME802154_SHORTADDRMODE;
      000162 90r00r06         [24]  359 	mov	dptr,#(_frame + 0x0005)
      000165 74 02            [12]  360 	mov	a,#0x02
      000167 F0               [24]  361 	movx	@dptr,a
                                    362 ;	../contiki-sensinode/core/net/mac/framer-802154.c:133: frame.dest_addr[0] = 0xFF;
      000168 90r00r0C         [24]  363 	mov	dptr,#(_frame + 0x000b)
      00016B 74 FF            [12]  364 	mov	a,#0xFF
      00016D F0               [24]  365 	movx	@dptr,a
                                    366 ;	../contiki-sensinode/core/net/mac/framer-802154.c:134: frame.dest_addr[1] = 0xFF;
      00016E 90r00r0D         [24]  367 	mov	dptr,#(_frame + 0x000c)
      000171 F0               [24]  368 	movx	@dptr,a
      000172 80 27            [24]  369 	sjmp	00111$
      000174                        370 00110$:
                                    371 ;	../contiki-sensinode/core/net/mac/framer-802154.c:138: packetbuf_addr(PACKETBUF_ADDR_RECEIVER));
      000174 75 82 19         [24]  372 	mov	dpl,#0x19
      000177 12r00r00         [24]  373 	lcall	_packetbuf_addr
      00017A AD 82            [24]  374 	mov	r5,dpl
      00017C AE 83            [24]  375 	mov	r6,dph
      00017E AF F0            [24]  376 	mov	r7,b
                                    377 ;	../contiki-sensinode/core/net/mac/framer-802154.c:137: rimeaddr_copy((rimeaddr_t *)&frame.dest_addr,
      000180 C0 05            [24]  378 	push	ar5
      000182 C0 06            [24]  379 	push	ar6
      000184 C0 07            [24]  380 	push	ar7
      000186 90r00r0C         [24]  381 	mov	dptr,#(_frame + 0x000b)
      000189 75 F0 00         [24]  382 	mov	b,#0x00
      00018C 12r00r00         [24]  383 	lcall	_rimeaddr_copy
      00018F 15 81            [12]  384 	dec	sp
      000191 15 81            [12]  385 	dec	sp
      000193 15 81            [12]  386 	dec	sp
                                    387 ;	../contiki-sensinode/core/net/mac/framer-802154.c:141: frame.fcf.dest_addr_mode = FRAME802154_SHORTADDRMODE;
      000195 90r00r06         [24]  388 	mov	dptr,#(_frame + 0x0005)
      000198 74 02            [12]  389 	mov	a,#0x02
      00019A F0               [24]  390 	movx	@dptr,a
      00019B                        391 00111$:
                                    392 ;	../contiki-sensinode/core/net/mac/framer-802154.c:148: frame.src_pid = IEEE802154_PANID;
      00019B 90r00r14         [24]  393 	mov	dptr,#(_frame + 0x0013)
      00019E 74 49            [12]  394 	mov	a,#0x49
      0001A0 F0               [24]  395 	movx	@dptr,a
      0001A1 74 54            [12]  396 	mov	a,#0x54
      0001A3 A3               [24]  397 	inc	dptr
      0001A4 F0               [24]  398 	movx	@dptr,a
                                    399 ;	../contiki-sensinode/core/net/mac/framer-802154.c:154: rimeaddr_copy((rimeaddr_t *)&frame.src_addr, &rimeaddr_node_addr);
      0001A5 74r00            [12]  400 	mov	a,#_rimeaddr_node_addr
      0001A7 C0 E0            [24]  401 	push	acc
      0001A9 74s00            [12]  402 	mov	a,#(_rimeaddr_node_addr >> 8)
      0001AB C0 E0            [24]  403 	push	acc
      0001AD E4               [12]  404 	clr	a
      0001AE C0 E0            [24]  405 	push	acc
      0001B0 90r00r16         [24]  406 	mov	dptr,#(_frame + 0x0015)
      0001B3 75 F0 00         [24]  407 	mov	b,#0x00
      0001B6 12r00r00         [24]  408 	lcall	_rimeaddr_copy
      0001B9 15 81            [12]  409 	dec	sp
      0001BB 15 81            [12]  410 	dec	sp
      0001BD 15 81            [12]  411 	dec	sp
                                    412 ;	../contiki-sensinode/core/net/mac/framer-802154.c:156: frame.payload = packetbuf_dataptr();
      0001BF 12r00r00         [24]  413 	lcall	_packetbuf_dataptr
      0001C2 AD 82            [24]  414 	mov	r5,dpl
      0001C4 AE 83            [24]  415 	mov	r6,dph
      0001C6 AF F0            [24]  416 	mov	r7,b
      0001C8 90r00r2E         [24]  417 	mov	dptr,#(_frame + 0x002d)
      0001CB ED               [12]  418 	mov	a,r5
      0001CC F0               [24]  419 	movx	@dptr,a
      0001CD EE               [12]  420 	mov	a,r6
      0001CE A3               [24]  421 	inc	dptr
      0001CF F0               [24]  422 	movx	@dptr,a
      0001D0 EF               [12]  423 	mov	a,r7
      0001D1 A3               [24]  424 	inc	dptr
      0001D2 F0               [24]  425 	movx	@dptr,a
                                    426 ;	../contiki-sensinode/core/net/mac/framer-802154.c:157: frame.payload_len = packetbuf_datalen();
      0001D3 12r00r00         [24]  427 	lcall	_packetbuf_datalen
      0001D6 AE 82            [24]  428 	mov	r6,dpl
      0001D8 90r00r31         [24]  429 	mov	dptr,#(_frame + 0x0030)
      0001DB EE               [12]  430 	mov	a,r6
      0001DC F0               [24]  431 	movx	@dptr,a
                                    432 ;	../contiki-sensinode/core/net/mac/framer-802154.c:158: len = frame802154_hdrlen(&frame);
      0001DD 90r00r01         [24]  433 	mov	dptr,#_frame
      0001E0 75 F0 00         [24]  434 	mov	b,#0x00
      0001E3 12r00r00         [24]  435 	lcall	_frame802154_hdrlen
      0001E6 AF 82            [24]  436 	mov	r7,dpl
      0001E8 90r00r32         [24]  437 	mov	dptr,#_len
      0001EB EF               [12]  438 	mov	a,r7
      0001EC F0               [24]  439 	movx	@dptr,a
                                    440 ;	../contiki-sensinode/core/net/mac/framer-802154.c:159: if(packetbuf_hdralloc(len)) {
      0001ED 7E 00            [12]  441 	mov	r6,#0x00
      0001EF 8F 82            [24]  442 	mov	dpl,r7
      0001F1 8E 83            [24]  443 	mov	dph,r6
      0001F3 12r00r00         [24]  444 	lcall	_packetbuf_hdralloc
      0001F6 E5 82            [12]  445 	mov	a,dpl
      0001F8 85 83 F0         [24]  446 	mov	b,dph
      0001FB 45 F0            [12]  447 	orl	a,b
      0001FD 60 31            [24]  448 	jz	00113$
                                    449 ;	../contiki-sensinode/core/net/mac/framer-802154.c:160: frame802154_create(&frame, packetbuf_hdrptr(), len);
      0001FF 90r00r32         [24]  450 	mov	dptr,#_len
      000202 E0               [24]  451 	movx	a,@dptr
      000203 FF               [12]  452 	mov	r7,a
      000204 C0 07            [24]  453 	push	ar7
      000206 12r00r00         [24]  454 	lcall	_packetbuf_hdrptr
      000209 AC 82            [24]  455 	mov	r4,dpl
      00020B AD 83            [24]  456 	mov	r5,dph
      00020D AE F0            [24]  457 	mov	r6,b
      00020F C0 04            [24]  458 	push	ar4
      000211 C0 05            [24]  459 	push	ar5
      000213 C0 06            [24]  460 	push	ar6
      000215 90r00r01         [24]  461 	mov	dptr,#_frame
      000218 75 F0 00         [24]  462 	mov	b,#0x00
      00021B 12r00r00         [24]  463 	lcall	_frame802154_create
      00021E E5 81            [12]  464 	mov	a,sp
      000220 24 FC            [12]  465 	add	a,#0xfc
      000222 F5 81            [12]  466 	mov	sp,a
                                    467 ;	../contiki-sensinode/core/net/mac/framer-802154.c:166: return len;
      000224 90r00r32         [24]  468 	mov	dptr,#_len
      000227 E0               [24]  469 	movx	a,@dptr
      000228 FF               [12]  470 	mov	r7,a
      000229 7E 00            [12]  471 	mov	r6,#0x00
      00022B 8F 82            [24]  472 	mov	dpl,r7
      00022D 8E 83            [24]  473 	mov	dph,r6
      00022F 22               [24]  474 	ret
      000230                        475 00113$:
                                    476 ;	../contiki-sensinode/core/net/mac/framer-802154.c:169: return FRAMER_FAILED;
      000230 90 FF FF         [24]  477 	mov	dptr,#0xFFFF
      000233 22               [24]  478 	ret
                                    479 ;------------------------------------------------------------
                                    480 ;Allocation info for local variables in function 'parse'
                                    481 ;------------------------------------------------------------
                                    482 ;	../contiki-sensinode/core/net/mac/framer-802154.c:174: parse(void)
                                    483 ;	-----------------------------------------
                                    484 ;	 function parse
                                    485 ;	-----------------------------------------
      000234                        486 _parse:
                                    487 ;	../contiki-sensinode/core/net/mac/framer-802154.c:176: len = packetbuf_datalen();
      000234 12r00r00         [24]  488 	lcall	_packetbuf_datalen
      000237 AE 82            [24]  489 	mov	r6,dpl
      000239 90r00r32         [24]  490 	mov	dptr,#_len
      00023C EE               [12]  491 	mov	a,r6
      00023D F0               [24]  492 	movx	@dptr,a
                                    493 ;	../contiki-sensinode/core/net/mac/framer-802154.c:177: if(frame802154_parse(packetbuf_dataptr(), len, &frame) &&
      00023E C0 06            [24]  494 	push	ar6
      000240 12r00r00         [24]  495 	lcall	_packetbuf_dataptr
      000243 AC 82            [24]  496 	mov	r4,dpl
      000245 AD 83            [24]  497 	mov	r5,dph
      000247 AF F0            [24]  498 	mov	r7,b
      000249 D0 06            [24]  499 	pop	ar6
      00024B 74r01            [12]  500 	mov	a,#_frame
      00024D C0 E0            [24]  501 	push	acc
      00024F 74s00            [12]  502 	mov	a,#(_frame >> 8)
      000251 C0 E0            [24]  503 	push	acc
      000253 E4               [12]  504 	clr	a
      000254 C0 E0            [24]  505 	push	acc
      000256 C0 06            [24]  506 	push	ar6
      000258 8C 82            [24]  507 	mov	dpl,r4
      00025A 8D 83            [24]  508 	mov	dph,r5
      00025C 8F F0            [24]  509 	mov	b,r7
      00025E 12r00r00         [24]  510 	lcall	_frame802154_parse
      000261 AF 82            [24]  511 	mov	r7,dpl
      000263 E5 81            [12]  512 	mov	a,sp
      000265 24 FC            [12]  513 	add	a,#0xfc
      000267 F5 81            [12]  514 	mov	sp,a
      000269 EF               [12]  515 	mov	a,r7
      00026A 70 03            [24]  516 	jnz	00131$
      00026C 02r03r4A         [24]  517 	ljmp	00109$
      00026F                        518 00131$:
                                    519 ;	../contiki-sensinode/core/net/mac/framer-802154.c:178: packetbuf_hdrreduce(len - frame.payload_len)) {
      00026F 90r00r32         [24]  520 	mov	dptr,#_len
      000272 E0               [24]  521 	movx	a,@dptr
      000273 FF               [12]  522 	mov	r7,a
      000274 7E 00            [12]  523 	mov	r6,#0x00
      000276 90r00r31         [24]  524 	mov	dptr,#(_frame + 0x0030)
      000279 E0               [24]  525 	movx	a,@dptr
      00027A FD               [12]  526 	mov	r5,a
      00027B 7C 00            [12]  527 	mov	r4,#0x00
      00027D EF               [12]  528 	mov	a,r7
      00027E C3               [12]  529 	clr	c
      00027F 9D               [12]  530 	subb	a,r5
      000280 FF               [12]  531 	mov	r7,a
      000281 EE               [12]  532 	mov	a,r6
      000282 9C               [12]  533 	subb	a,r4
      000283 FE               [12]  534 	mov	r6,a
      000284 8F 82            [24]  535 	mov	dpl,r7
      000286 8E 83            [24]  536 	mov	dph,r6
      000288 12r00r00         [24]  537 	lcall	_packetbuf_hdrreduce
      00028B E5 82            [12]  538 	mov	a,dpl
      00028D 85 83 F0         [24]  539 	mov	b,dph
      000290 45 F0            [12]  540 	orl	a,b
      000292 70 03            [24]  541 	jnz	00132$
      000294 02r03r4A         [24]  542 	ljmp	00109$
      000297                        543 00132$:
                                    544 ;	../contiki-sensinode/core/net/mac/framer-802154.c:179: if(frame.fcf.dest_addr_mode) {
      000297 90r00r06         [24]  545 	mov	dptr,#(_frame + 0x0005)
      00029A E0               [24]  546 	movx	a,@dptr
      00029B FF               [12]  547 	mov	r7,a
      00029C 60 51            [24]  548 	jz	00107$
                                    549 ;	../contiki-sensinode/core/net/mac/framer-802154.c:180: if(frame.dest_pid != IEEE802154_PANID &&
      00029E 90r00r0A         [24]  550 	mov	dptr,#(_frame + 0x0009)
      0002A1 E0               [24]  551 	movx	a,@dptr
      0002A2 FD               [12]  552 	mov	r5,a
      0002A3 A3               [24]  553 	inc	dptr
      0002A4 E0               [24]  554 	movx	a,@dptr
      0002A5 FE               [12]  555 	mov	r6,a
      0002A6 BD 49 05         [24]  556 	cjne	r5,#0x49,00134$
      0002A9 BE 54 02         [24]  557 	cjne	r6,#0x54,00134$
      0002AC 80 0C            [24]  558 	sjmp	00102$
      0002AE                        559 00134$:
                                    560 ;	../contiki-sensinode/core/net/mac/framer-802154.c:181: frame.dest_pid != FRAME802154_BROADCASTPANDID) {
      0002AE BD FF 05         [24]  561 	cjne	r5,#0xFF,00135$
      0002B1 BE FF 02         [24]  562 	cjne	r6,#0xFF,00135$
      0002B4 80 04            [24]  563 	sjmp	00102$
      0002B6                        564 00135$:
                                    565 ;	../contiki-sensinode/core/net/mac/framer-802154.c:184: return FRAMER_FAILED;
      0002B6 90 FF FF         [24]  566 	mov	dptr,#0xFFFF
      0002B9 22               [24]  567 	ret
      0002BA                        568 00102$:
                                    569 ;	../contiki-sensinode/core/net/mac/framer-802154.c:186: if(!is_broadcast_addr(frame.fcf.dest_addr_mode, frame.dest_addr)) {
      0002BA 74r0C            [12]  570 	mov	a,#(_frame + 0x000b)
      0002BC C0 E0            [24]  571 	push	acc
      0002BE 74s00            [12]  572 	mov	a,#((_frame + 0x000b) >> 8)
      0002C0 C0 E0            [24]  573 	push	acc
      0002C2 E4               [12]  574 	clr	a
      0002C3 C0 E0            [24]  575 	push	acc
      0002C5 8F 82            [24]  576 	mov	dpl,r7
      0002C7 12r00r00         [24]  577 	lcall	_is_broadcast_addr
      0002CA AE 82            [24]  578 	mov	r6,dpl
      0002CC AF 83            [24]  579 	mov	r7,dph
      0002CE 15 81            [12]  580 	dec	sp
      0002D0 15 81            [12]  581 	dec	sp
      0002D2 15 81            [12]  582 	dec	sp
      0002D4 EE               [12]  583 	mov	a,r6
      0002D5 4F               [12]  584 	orl	a,r7
      0002D6 70 17            [24]  585 	jnz	00107$
                                    586 ;	../contiki-sensinode/core/net/mac/framer-802154.c:187: packetbuf_set_addr(PACKETBUF_ADDR_RECEIVER, (rimeaddr_t *)&frame.dest_addr);
      0002D8 74r0C            [12]  587 	mov	a,#(_frame + 0x000b)
      0002DA C0 E0            [24]  588 	push	acc
      0002DC 74s00            [12]  589 	mov	a,#((_frame + 0x000b) >> 8)
      0002DE C0 E0            [24]  590 	push	acc
      0002E0 E4               [12]  591 	clr	a
      0002E1 C0 E0            [24]  592 	push	acc
      0002E3 75 82 19         [24]  593 	mov	dpl,#0x19
      0002E6 12r00r00         [24]  594 	lcall	_packetbuf_set_addr
      0002E9 15 81            [12]  595 	dec	sp
      0002EB 15 81            [12]  596 	dec	sp
      0002ED 15 81            [12]  597 	dec	sp
      0002EF                        598 00107$:
                                    599 ;	../contiki-sensinode/core/net/mac/framer-802154.c:190: packetbuf_set_addr(PACKETBUF_ADDR_SENDER, (rimeaddr_t *)&frame.src_addr);
      0002EF 74r16            [12]  600 	mov	a,#(_frame + 0x0015)
      0002F1 C0 E0            [24]  601 	push	acc
      0002F3 74s00            [12]  602 	mov	a,#((_frame + 0x0015) >> 8)
      0002F5 C0 E0            [24]  603 	push	acc
      0002F7 E4               [12]  604 	clr	a
      0002F8 C0 E0            [24]  605 	push	acc
      0002FA 75 82 18         [24]  606 	mov	dpl,#0x18
      0002FD 12r00r00         [24]  607 	lcall	_packetbuf_set_addr
      000300 15 81            [12]  608 	dec	sp
      000302 15 81            [12]  609 	dec	sp
      000304 15 81            [12]  610 	dec	sp
                                    611 ;	../contiki-sensinode/core/net/mac/framer-802154.c:191: packetbuf_set_attr(PACKETBUF_ATTR_PENDING, frame.fcf.frame_pending);
      000306 90r00r03         [24]  612 	mov	dptr,#(_frame + 0x0002)
      000309 E0               [24]  613 	movx	a,@dptr
      00030A FF               [12]  614 	mov	r7,a
      00030B 7E 00            [12]  615 	mov	r6,#0x00
      00030D C0 07            [24]  616 	push	ar7
      00030F C0 06            [24]  617 	push	ar6
      000311 75 82 12         [24]  618 	mov	dpl,#0x12
      000314 12r00r00         [24]  619 	lcall	_packetbuf_set_attr
      000317 15 81            [12]  620 	dec	sp
      000319 15 81            [12]  621 	dec	sp
                                    622 ;	../contiki-sensinode/core/net/mac/framer-802154.c:193: packetbuf_set_attr(PACKETBUF_ATTR_PACKET_ID, frame.seq);
      00031B 90r00r09         [24]  623 	mov	dptr,#(_frame + 0x0008)
      00031E E0               [24]  624 	movx	a,@dptr
      00031F FF               [12]  625 	mov	r7,a
      000320 7E 00            [12]  626 	mov	r6,#0x00
      000322 C0 07            [24]  627 	push	ar7
      000324 C0 06            [24]  628 	push	ar6
      000326 75 82 0D         [24]  629 	mov	dpl,#0x0D
      000329 12r00r00         [24]  630 	lcall	_packetbuf_set_attr
      00032C 15 81            [12]  631 	dec	sp
      00032E 15 81            [12]  632 	dec	sp
                                    633 ;	../contiki-sensinode/core/net/mac/framer-802154.c:200: return len - frame.payload_len;
      000330 90r00r32         [24]  634 	mov	dptr,#_len
      000333 E0               [24]  635 	movx	a,@dptr
      000334 FF               [12]  636 	mov	r7,a
      000335 7E 00            [12]  637 	mov	r6,#0x00
      000337 90r00r31         [24]  638 	mov	dptr,#(_frame + 0x0030)
      00033A E0               [24]  639 	movx	a,@dptr
      00033B FD               [12]  640 	mov	r5,a
      00033C 7C 00            [12]  641 	mov	r4,#0x00
      00033E EF               [12]  642 	mov	a,r7
      00033F C3               [12]  643 	clr	c
      000340 9D               [12]  644 	subb	a,r5
      000341 FF               [12]  645 	mov	r7,a
      000342 EE               [12]  646 	mov	a,r6
      000343 9C               [12]  647 	subb	a,r4
      000344 FE               [12]  648 	mov	r6,a
      000345 8F 82            [24]  649 	mov	dpl,r7
      000347 8E 83            [24]  650 	mov	dph,r6
      000349 22               [24]  651 	ret
      00034A                        652 00109$:
                                    653 ;	../contiki-sensinode/core/net/mac/framer-802154.c:202: return FRAMER_FAILED;
      00034A 90 FF FF         [24]  654 	mov	dptr,#0xFFFF
      00034D 22               [24]  655 	ret
                                    656 	.area CSEG    (CODE)
                                    657 	.area CONST   (CODE)
      000000                        658 _framer_802154:
      000000r4Cs00                  659 	.byte _create,(_create >> 8)
      000002r34s02                  660 	.byte _parse,(_parse >> 8)
                                    661 	.area XINIT   (CODE)
      000000                        662 __xinit__initialized:
      000000 00                     663 	.db #0x00	; 0
                                    664 	.area CABS    (ABS,CODE)

                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ANSI-C Compiler
                                      3 ; Version 3.4.0 #8981 (Oct 24 2015) (Linux)
                                      4 ; This file was generated Sun Oct 25 01:52:06 2015
                                      5 ;--------------------------------------------------------
                                      6 	.module nullrdc_noframer
                                      7 	.optsdcc -mmcs51 --model-large
                                      8 	
                                      9 ;--------------------------------------------------------
                                     10 ; Public variables in this module
                                     11 ;--------------------------------------------------------
                                     12 	.globl _nullrdc_noframer_driver
                                     13 	.globl _queuebuf_to_packetbuf
                                     14 	.globl _packetbuf_totlen
                                     15 	.globl _packetbuf_hdrptr
                                     16 ;--------------------------------------------------------
                                     17 ; special function registers
                                     18 ;--------------------------------------------------------
                                     19 	.area RSEG    (ABS,DATA)
      000000                         20 	.org 0x0000
                                     21 ;--------------------------------------------------------
                                     22 ; special function bits
                                     23 ;--------------------------------------------------------
                                     24 	.area RSEG    (ABS,DATA)
      000000                         25 	.org 0x0000
                                     26 ;--------------------------------------------------------
                                     27 ; overlayable register banks
                                     28 ;--------------------------------------------------------
                                     29 	.area REG_BANK_0	(REL,OVR,DATA)
      000000                         30 	.ds 8
                                     31 ;--------------------------------------------------------
                                     32 ; internal ram data
                                     33 ;--------------------------------------------------------
                                     34 	.area DSEG    (DATA)
                                     35 ;--------------------------------------------------------
                                     36 ; overlayable items in internal ram 
                                     37 ;--------------------------------------------------------
                                     38 ;--------------------------------------------------------
                                     39 ; indirectly addressable internal ram data
                                     40 ;--------------------------------------------------------
                                     41 	.area ISEG    (DATA)
                                     42 ;--------------------------------------------------------
                                     43 ; absolute internal ram data
                                     44 ;--------------------------------------------------------
                                     45 	.area IABS    (ABS,DATA)
                                     46 	.area IABS    (ABS,DATA)
                                     47 ;--------------------------------------------------------
                                     48 ; bit data
                                     49 ;--------------------------------------------------------
                                     50 	.area BSEG    (BIT)
                                     51 ;--------------------------------------------------------
                                     52 ; paged external ram data
                                     53 ;--------------------------------------------------------
                                     54 	.area PSEG    (PAG,XDATA)
                                     55 ;--------------------------------------------------------
                                     56 ; external ram data
                                     57 ;--------------------------------------------------------
                                     58 	.area XSEG    (XDATA)
                                     59 ;--------------------------------------------------------
                                     60 ; absolute external ram data
                                     61 ;--------------------------------------------------------
                                     62 	.area XABS    (ABS,XDATA)
                                     63 ;--------------------------------------------------------
                                     64 ; external initialized ram data
                                     65 ;--------------------------------------------------------
                                     66 	.area XISEG   (XDATA)
                                     67 	.area HOME    (CODE)
                                     68 	.area GSINIT0 (CODE)
                                     69 	.area GSINIT1 (CODE)
                                     70 	.area GSINIT2 (CODE)
                                     71 	.area GSINIT3 (CODE)
                                     72 	.area GSINIT4 (CODE)
                                     73 	.area GSINIT5 (CODE)
                                     74 	.area GSINIT  (CODE)
                                     75 	.area GSFINAL (CODE)
                                     76 	.area CSEG    (CODE)
                                     77 ;--------------------------------------------------------
                                     78 ; global & static initialisations
                                     79 ;--------------------------------------------------------
                                     80 	.area HOME    (CODE)
                                     81 	.area GSINIT  (CODE)
                                     82 	.area GSFINAL (CODE)
                                     83 	.area GSINIT  (CODE)
                                     84 ;--------------------------------------------------------
                                     85 ; Home
                                     86 ;--------------------------------------------------------
                                     87 	.area HOME    (CODE)
                                     88 	.area HOME    (CODE)
                                     89 ;--------------------------------------------------------
                                     90 ; code
                                     91 ;--------------------------------------------------------
                                     92 	.area CSEG    (CODE)
                                     93 ;------------------------------------------------------------
                                     94 ;Allocation info for local variables in function 'send_packet'
                                     95 ;------------------------------------------------------------
                                     96 ;ptr                       Allocated to stack - sp -8
                                     97 ;sent                      Allocated to stack - sp -3
                                     98 ;ret                       Allocated to registers r6 r7 
                                     99 ;sloc0                     Allocated to stack - sp -1
                                    100 ;------------------------------------------------------------
                                    101 ;	../contiki-sensinode/core/net/mac/nullrdc-noframer.c:48: send_packet(mac_callback_t sent, void *ptr)
                                    102 ;	-----------------------------------------
                                    103 ;	 function send_packet
                                    104 ;	-----------------------------------------
      000000                        105 _send_packet:
                           000007   106 	ar7 = 0x07
                           000006   107 	ar6 = 0x06
                           000005   108 	ar5 = 0x05
                           000004   109 	ar4 = 0x04
                           000003   110 	ar3 = 0x03
                           000002   111 	ar2 = 0x02
                           000001   112 	ar1 = 0x01
                           000000   113 	ar0 = 0x00
      000000 C0 82            [24]  114 	push	dpl
      000002 C0 83            [24]  115 	push	dph
      000004 05 81            [12]  116 	inc	sp
      000006 05 81            [12]  117 	inc	sp
                                    118 ;	../contiki-sensinode/core/net/mac/nullrdc-noframer.c:51: if(NETSTACK_RADIO.send(packetbuf_hdrptr(), packetbuf_totlen()) == RADIO_TX_OK) {
      000008 90r00r06         [24]  119 	mov	dptr,#(_cc2530_rf_driver + 0x0006)
      00000B E4               [12]  120 	clr	a
      00000C 93               [24]  121 	movc	a,@a+dptr
      00000D FC               [12]  122 	mov	r4,a
      00000E A3               [24]  123 	inc	dptr
      00000F E4               [12]  124 	clr	a
      000010 93               [24]  125 	movc	a,@a+dptr
      000011 FD               [12]  126 	mov	r5,a
      000012 C0 05            [24]  127 	push	ar5
      000014 C0 04            [24]  128 	push	ar4
      000016 12r00r00         [24]  129 	lcall	_packetbuf_totlen
      000019 A8 81            [24]  130 	mov	r0,sp
      00001B 18               [12]  131 	dec	r0
      00001C 18               [12]  132 	dec	r0
      00001D 18               [12]  133 	dec	r0
      00001E A6 82            [24]  134 	mov	@r0,dpl
      000020 08               [12]  135 	inc	r0
      000021 A6 83            [24]  136 	mov	@r0,dph
      000023 12r00r00         [24]  137 	lcall	_packetbuf_hdrptr
      000026 AB 82            [24]  138 	mov	r3,dpl
      000028 AE 83            [24]  139 	mov	r6,dph
      00002A AF F0            [24]  140 	mov	r7,b
      00002C D0 04            [24]  141 	pop	ar4
      00002E D0 05            [24]  142 	pop	ar5
      000030 A8 81            [24]  143 	mov	r0,sp
      000032 18               [12]  144 	dec	r0
      000033 E6               [12]  145 	mov	a,@r0
      000034 C0 E0            [24]  146 	push	acc
      000036 08               [12]  147 	inc	r0
      000037 E6               [12]  148 	mov	a,@r0
      000038 C0 E0            [24]  149 	push	acc
      00003A 12r00r3F         [24]  150 	lcall	00117$
      00003D 80 0B            [24]  151 	sjmp	00118$
      00003F                        152 00117$:
      00003F C0 04            [24]  153 	push	ar4
      000041 C0 05            [24]  154 	push	ar5
      000043 8B 82            [24]  155 	mov	dpl,r3
      000045 8E 83            [24]  156 	mov	dph,r6
      000047 8F F0            [24]  157 	mov	b,r7
      000049 22               [24]  158 	ret
      00004A                        159 00118$:
      00004A AC 82            [24]  160 	mov	r4,dpl
      00004C AD 83            [24]  161 	mov	r5,dph
      00004E 15 81            [12]  162 	dec	sp
      000050 15 81            [12]  163 	dec	sp
      000052 EC               [12]  164 	mov	a,r4
      000053 4D               [12]  165 	orl	a,r5
                                    166 ;	../contiki-sensinode/core/net/mac/nullrdc-noframer.c:52: ret = MAC_TX_OK;
      000054 70 04            [24]  167 	jnz	00102$
      000056 FE               [12]  168 	mov	r6,a
      000057 FF               [12]  169 	mov	r7,a
      000058 80 04            [24]  170 	sjmp	00106$
      00005A                        171 00102$:
                                    172 ;	../contiki-sensinode/core/net/mac/nullrdc-noframer.c:54: ret =  MAC_TX_ERR;
      00005A 7E 04            [12]  173 	mov	r6,#0x04
      00005C 7F 00            [12]  174 	mov	r7,#0x00
                                    175 ;	../contiki-sensinode/core/net/mac/nullrdc-noframer.c:56: mac_call_sent_callback(sent, ptr, ret, 1);
      00005E                        176 00106$:
      00005E E5 81            [12]  177 	mov	a,sp
      000060 24 FD            [12]  178 	add	a,#0xfd
      000062 F8               [12]  179 	mov	r0,a
      000063 E6               [12]  180 	mov	a,@r0
      000064 08               [12]  181 	inc	r0
      000065 46               [12]  182 	orl	a,@r0
      000066 60 30            [24]  183 	jz	00109$
      000068 74 01            [12]  184 	mov	a,#0x01
      00006A C0 E0            [24]  185 	push	acc
      00006C E4               [12]  186 	clr	a
      00006D C0 E0            [24]  187 	push	acc
      00006F C0 06            [24]  188 	push	ar6
      000071 C0 07            [24]  189 	push	ar7
      000073 12r00r78         [24]  190 	lcall	00121$
      000076 80 1A            [24]  191 	sjmp	00122$
      000078                        192 00121$:
      000078 E5 81            [12]  193 	mov	a,sp
      00007A 24 F7            [12]  194 	add	a,#0xf7
      00007C F8               [12]  195 	mov	r0,a
      00007D E6               [12]  196 	mov	a,@r0
      00007E C0 E0            [24]  197 	push	acc
      000080 08               [12]  198 	inc	r0
      000081 E6               [12]  199 	mov	a,@r0
      000082 C0 E0            [24]  200 	push	acc
      000084 E5 81            [12]  201 	mov	a,sp
      000086 24 F0            [12]  202 	add	a,#0xf0
      000088 F8               [12]  203 	mov	r0,a
      000089 86 82            [24]  204 	mov	dpl,@r0
      00008B 08               [12]  205 	inc	r0
      00008C 86 83            [24]  206 	mov	dph,@r0
      00008E 08               [12]  207 	inc	r0
      00008F 86 F0            [24]  208 	mov	b,@r0
      000091 22               [24]  209 	ret
      000092                        210 00122$:
      000092 E5 81            [12]  211 	mov	a,sp
      000094 24 FC            [12]  212 	add	a,#0xfc
      000096 F5 81            [12]  213 	mov	sp,a
      000098                        214 00109$:
      000098 E5 81            [12]  215 	mov	a,sp
      00009A 24 FC            [12]  216 	add	a,#0xFC
      00009C F5 81            [12]  217 	mov	sp,a
      00009E 22               [24]  218 	ret
                                    219 ;------------------------------------------------------------
                                    220 ;Allocation info for local variables in function 'send_list'
                                    221 ;------------------------------------------------------------
                                    222 ;ptr                       Allocated to stack - sp -4
                                    223 ;buf_list                  Allocated to stack - sp -7
                                    224 ;sent                      Allocated to registers r6 r7 
                                    225 ;------------------------------------------------------------
                                    226 ;	../contiki-sensinode/core/net/mac/nullrdc-noframer.c:60: send_list(mac_callback_t sent, void *ptr, struct rdc_buf_list *buf_list)
                                    227 ;	-----------------------------------------
                                    228 ;	 function send_list
                                    229 ;	-----------------------------------------
      00009F                        230 _send_list:
      00009F AE 82            [24]  231 	mov	r6,dpl
      0000A1 AF 83            [24]  232 	mov	r7,dph
                                    233 ;	../contiki-sensinode/core/net/mac/nullrdc-noframer.c:62: if(buf_list != NULL) {
      0000A3 E5 81            [12]  234 	mov	a,sp
      0000A5 24 F9            [12]  235 	add	a,#0xf9
      0000A7 F8               [12]  236 	mov	r0,a
      0000A8 E6               [12]  237 	mov	a,@r0
      0000A9 08               [12]  238 	inc	r0
      0000AA 46               [12]  239 	orl	a,@r0
      0000AB 60 56            [24]  240 	jz	00103$
                                    241 ;	../contiki-sensinode/core/net/mac/nullrdc-noframer.c:63: queuebuf_to_packetbuf(buf_list->buf);
      0000AD E5 81            [12]  242 	mov	a,sp
      0000AF 24 F9            [12]  243 	add	a,#0xf9
      0000B1 F8               [12]  244 	mov	r0,a
      0000B2 86 03            [24]  245 	mov	ar3,@r0
      0000B4 08               [12]  246 	inc	r0
      0000B5 86 04            [24]  247 	mov	ar4,@r0
      0000B7 08               [12]  248 	inc	r0
      0000B8 86 05            [24]  249 	mov	ar5,@r0
      0000BA 74 03            [12]  250 	mov	a,#0x03
      0000BC 2B               [12]  251 	add	a,r3
      0000BD FB               [12]  252 	mov	r3,a
      0000BE E4               [12]  253 	clr	a
      0000BF 3C               [12]  254 	addc	a,r4
      0000C0 FC               [12]  255 	mov	r4,a
      0000C1 8B 82            [24]  256 	mov	dpl,r3
      0000C3 8C 83            [24]  257 	mov	dph,r4
      0000C5 8D F0            [24]  258 	mov	b,r5
      0000C7 12r00r00         [24]  259 	lcall	__gptrget
      0000CA FB               [12]  260 	mov	r3,a
      0000CB A3               [24]  261 	inc	dptr
      0000CC 12r00r00         [24]  262 	lcall	__gptrget
      0000CF FC               [12]  263 	mov	r4,a
      0000D0 A3               [24]  264 	inc	dptr
      0000D1 12r00r00         [24]  265 	lcall	__gptrget
      0000D4 FD               [12]  266 	mov	r5,a
      0000D5 8B 82            [24]  267 	mov	dpl,r3
      0000D7 8C 83            [24]  268 	mov	dph,r4
      0000D9 8D F0            [24]  269 	mov	b,r5
      0000DB C0 07            [24]  270 	push	ar7
      0000DD C0 06            [24]  271 	push	ar6
      0000DF 12r00r00         [24]  272 	lcall	_queuebuf_to_packetbuf
      0000E2 D0 06            [24]  273 	pop	ar6
      0000E4 D0 07            [24]  274 	pop	ar7
                                    275 ;	../contiki-sensinode/core/net/mac/nullrdc-noframer.c:64: send_packet(sent, ptr);
      0000E6 E5 81            [12]  276 	mov	a,sp
      0000E8 24 FC            [12]  277 	add	a,#0xfc
      0000EA F8               [12]  278 	mov	r0,a
      0000EB E6               [12]  279 	mov	a,@r0
      0000EC C0 E0            [24]  280 	push	acc
      0000EE 08               [12]  281 	inc	r0
      0000EF E6               [12]  282 	mov	a,@r0
      0000F0 C0 E0            [24]  283 	push	acc
      0000F2 08               [12]  284 	inc	r0
      0000F3 E6               [12]  285 	mov	a,@r0
      0000F4 C0 E0            [24]  286 	push	acc
      0000F6 8E 82            [24]  287 	mov	dpl,r6
      0000F8 8F 83            [24]  288 	mov	dph,r7
      0000FA 12r00r00         [24]  289 	lcall	_send_packet
      0000FD 15 81            [12]  290 	dec	sp
      0000FF 15 81            [12]  291 	dec	sp
      000101 15 81            [12]  292 	dec	sp
      000103                        293 00103$:
      000103 22               [24]  294 	ret
                                    295 ;------------------------------------------------------------
                                    296 ;Allocation info for local variables in function 'packet_input'
                                    297 ;------------------------------------------------------------
                                    298 ;	../contiki-sensinode/core/net/mac/nullrdc-noframer.c:69: packet_input(void)
                                    299 ;	-----------------------------------------
                                    300 ;	 function packet_input
                                    301 ;	-----------------------------------------
      000104                        302 _packet_input:
                                    303 ;	../contiki-sensinode/core/net/mac/nullrdc-noframer.c:71: NETSTACK_MAC.input();
      000104 90r00r07         [24]  304 	mov	dptr,#(_csma_driver + 0x0007)
      000107 E4               [12]  305 	clr	a
      000108 93               [24]  306 	movc	a,@a+dptr
      000109 FE               [12]  307 	mov	r6,a
      00010A A3               [24]  308 	inc	dptr
      00010B E4               [12]  309 	clr	a
      00010C 93               [24]  310 	movc	a,@a+dptr
      00010D FF               [12]  311 	mov	r7,a
      00010E C0 07            [24]  312 	push	ar7
      000110 C0 06            [24]  313 	push	ar6
      000112 8E 82            [24]  314 	mov	dpl,r6
      000114 8F 83            [24]  315 	mov	dph,r7
      000116 12r00r00         [24]  316 	lcall	__sdcc_call_dptr
      000119 D0 06            [24]  317 	pop	ar6
      00011B D0 07            [24]  318 	pop	ar7
      00011D 22               [24]  319 	ret
                                    320 ;------------------------------------------------------------
                                    321 ;Allocation info for local variables in function 'on'
                                    322 ;------------------------------------------------------------
                                    323 ;	../contiki-sensinode/core/net/mac/nullrdc-noframer.c:75: on(void)
                                    324 ;	-----------------------------------------
                                    325 ;	 function on
                                    326 ;	-----------------------------------------
      00011E                        327 _on:
                                    328 ;	../contiki-sensinode/core/net/mac/nullrdc-noframer.c:77: return NETSTACK_RADIO.on();
      00011E 90r00r10         [24]  329 	mov	dptr,#(_cc2530_rf_driver + 0x0010)
      000121 E4               [12]  330 	clr	a
      000122 93               [24]  331 	movc	a,@a+dptr
      000123 FE               [12]  332 	mov	r6,a
      000124 A3               [24]  333 	inc	dptr
      000125 E4               [12]  334 	clr	a
      000126 93               [24]  335 	movc	a,@a+dptr
      000127 FF               [12]  336 	mov	r7,a
      000128 8E 82            [24]  337 	mov	dpl,r6
      00012A 8F 83            [24]  338 	mov	dph,r7
      00012C 02r00r00         [24]  339 	ljmp	__sdcc_call_dptr
                                    340 ;------------------------------------------------------------
                                    341 ;Allocation info for local variables in function 'off'
                                    342 ;------------------------------------------------------------
                                    343 ;keep_radio_on             Allocated to registers r6 r7 
                                    344 ;------------------------------------------------------------
                                    345 ;	../contiki-sensinode/core/net/mac/nullrdc-noframer.c:81: off(int keep_radio_on)
                                    346 ;	-----------------------------------------
                                    347 ;	 function off
                                    348 ;	-----------------------------------------
      00012F                        349 _off:
      00012F AE 82            [24]  350 	mov	r6,dpl
      000131 AF 83            [24]  351 	mov	r7,dph
                                    352 ;	../contiki-sensinode/core/net/mac/nullrdc-noframer.c:83: if(keep_radio_on) {
      000133 EE               [12]  353 	mov	a,r6
      000134 4F               [12]  354 	orl	a,r7
      000135 60 11            [24]  355 	jz	00102$
                                    356 ;	../contiki-sensinode/core/net/mac/nullrdc-noframer.c:84: return NETSTACK_RADIO.on();
      000137 90r00r10         [24]  357 	mov	dptr,#(_cc2530_rf_driver + 0x0010)
      00013A E4               [12]  358 	clr	a
      00013B 93               [24]  359 	movc	a,@a+dptr
      00013C FE               [12]  360 	mov	r6,a
      00013D A3               [24]  361 	inc	dptr
      00013E E4               [12]  362 	clr	a
      00013F 93               [24]  363 	movc	a,@a+dptr
      000140 FF               [12]  364 	mov	r7,a
      000141 8E 82            [24]  365 	mov	dpl,r6
      000143 8F 83            [24]  366 	mov	dph,r7
      000145 02r00r00         [24]  367 	ljmp	__sdcc_call_dptr
      000148                        368 00102$:
                                    369 ;	../contiki-sensinode/core/net/mac/nullrdc-noframer.c:86: return NETSTACK_RADIO.off();
      000148 90r00r12         [24]  370 	mov	dptr,#(_cc2530_rf_driver + 0x0012)
      00014B E4               [12]  371 	clr	a
      00014C 93               [24]  372 	movc	a,@a+dptr
      00014D FE               [12]  373 	mov	r6,a
      00014E A3               [24]  374 	inc	dptr
      00014F E4               [12]  375 	clr	a
      000150 93               [24]  376 	movc	a,@a+dptr
      000151 FF               [12]  377 	mov	r7,a
      000152 8E 82            [24]  378 	mov	dpl,r6
      000154 8F 83            [24]  379 	mov	dph,r7
      000156 02r00r00         [24]  380 	ljmp	__sdcc_call_dptr
                                    381 ;------------------------------------------------------------
                                    382 ;Allocation info for local variables in function 'channel_check_interval'
                                    383 ;------------------------------------------------------------
                                    384 ;	../contiki-sensinode/core/net/mac/nullrdc-noframer.c:91: channel_check_interval(void)
                                    385 ;	-----------------------------------------
                                    386 ;	 function channel_check_interval
                                    387 ;	-----------------------------------------
      000159                        388 _channel_check_interval:
                                    389 ;	../contiki-sensinode/core/net/mac/nullrdc-noframer.c:93: return 0;
      000159 90 00 00         [24]  390 	mov	dptr,#0x0000
      00015C 22               [24]  391 	ret
                                    392 ;------------------------------------------------------------
                                    393 ;Allocation info for local variables in function 'init'
                                    394 ;------------------------------------------------------------
                                    395 ;	../contiki-sensinode/core/net/mac/nullrdc-noframer.c:97: init(void)
                                    396 ;	-----------------------------------------
                                    397 ;	 function init
                                    398 ;	-----------------------------------------
      00015D                        399 _init:
                                    400 ;	../contiki-sensinode/core/net/mac/nullrdc-noframer.c:99: on();
      00015D 02r01r1E         [24]  401 	ljmp	_on
                                    402 	.area CSEG    (CODE)
                                    403 	.area CONST   (CODE)
      000000                        404 _nullrdc_noframer_driver:
      000000r11s00 80               405 	.byte __str_0,(__str_0 >> 8),#0x80
      000003r5Ds01                  406 	.byte _init,(_init >> 8)
      000005r00s00                  407 	.byte _send_packet,(_send_packet >> 8)
      000007r9Fs00                  408 	.byte _send_list,(_send_list >> 8)
      000009r04s01                  409 	.byte _packet_input,(_packet_input >> 8)
      00000Br1Es01                  410 	.byte _on,(_on >> 8)
      00000Dr2Fs01                  411 	.byte _off,(_off >> 8)
      00000Fr59s01                  412 	.byte _channel_check_interval,(_channel_check_interval >> 8)
      000011                        413 __str_0:
      000011 6E 75 6C 6C 72 64 63   414 	.ascii "nullrdc-noframer"
             2D 6E 6F 66 72 61 6D
             65 72
      000021 00                     415 	.db 0x00
                                    416 	.area XINIT   (CODE)
                                    417 	.area CABS    (ABS,CODE)
